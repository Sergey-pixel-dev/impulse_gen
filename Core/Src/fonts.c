/**
 * @file : fonts.c
 * @brief : Font data for ST7789 driver
 */

/* Includes ------------------------------------------------------------------*/
#include "fonts.h"

/**
 * Битовые массивы для 8x8 шрифта
 * Каждый символ представлен в виде 8 байт (строки)
 */
const uint8_t FONT_DATA[] = {
    /* . */
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0xc0,
    0xc0,
    /* , */
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0xC0,
    0xC0,
    0x40,
    0x80,
    0x00,
    /* : */
    0x00,
    0x00,
    0xC0,
    0xC0,
    0x00,
    0x00,
    0xC0,
    0xC0,
    /* 0-9 */
    0x78,
    0x84,
    0x8c,
    0x94,
    0xa4,
    0xc4,
    0x84,
    0x78, // 0
    0x20,
    0x60,
    0xa0,
    0x20,
    0x20,
    0x20,
    0x20,
    0xf0, // 1
    0x78,
    0x84,
    0x04,
    0x18,
    0x20,
    0x40,
    0x84,
    0xFC, // 2
    0x78,
    0x84,
    0x04,
    0x38,
    0x04,
    0x04,
    0x84,
    0x78, // 3
    0x08,
    0x18,
    0x28,
    0x48,
    0x88,
    0xFC,
    0x08,
    0x08, // 4
    0xFC,
    0x80,
    0x80,
    0xF8,
    0x04,
    0x04,
    0x84,
    0x78, // 5
    0x38,
    0x40,
    0x80,
    0xF8,
    0x84,
    0x84,
    0x84,
    0x78, // 6
    0xFC,
    0x84,
    0x08,
    0x10,
    0x20,
    0x20,
    0x20,
    0x20, // 7
    0x78,
    0x84,
    0x84,
    0x78,
    0x84,
    0x84,
    0x84,
    0x78, // 8
    0x78,
    0x84,
    0x84,
    0x84,
    0x7C,
    0x04,
    0x08,
    0x70, // 9
    /* A-Z */
    0x30,
    0x48,
    0x84,
    0x84,
    0xFC,
    0x84,
    0x84,
    0x84, // A
    0xF8,
    0x84,
    0x84,
    0xF8,
    0x84,
    0x84,
    0x84,
    0xF8, // B
    0x78,
    0x84,
    0x80,
    0x80,
    0x80,
    0x80,
    0x84,
    0x78, // C
    0xF0,
    0x88,
    0x84,
    0x84,
    0x84,
    0x84,
    0x88,
    0xF0, // D
    0xfc,
    0x80,
    0x80,
    0xf8,
    0x80,
    0x80,
    0x80,
    0xfc, // E
    0xFC,
    0x80,
    0x80,
    0xF8,
    0x80,
    0x80,
    0x80,
    0x80, // F
    0x78,
    0x84,
    0x80,
    0x80,
    0x9C,
    0x84,
    0x8C,
    0x74, // G
    0x88,
    0x88,
    0x88,
    0xf8,
    0x88,
    0x88,
    0x88,
    0x88, // H
    0xE0,
    0x40,
    0x40,
    0x40,
    0x40,
    0x40,
    0x40,
    0xE0, // I
    0x3E,
    0x08,
    0x08,
    0x08,
    0x08,
    0x08,
    0x88,
    0x70, // J
    0x84,
    0x88,
    0x90,
    0xE0,
    0x90,
    0x88,
    0x84,
    0x82, // K
    0x80,
    0x80,
    0x80,
    0x80,
    0x80,
    0x80,
    0x80,
    0xF8, // L
    0x82,
    0xC6,
    0xAA,
    0x92,
    0x82,
    0x82,
    0x82,
    0x82, // M
    0x84,
    0xc4,
    0xa4,
    0x94,
    0x8c,
    0x84,
    0x84,
    0x84, // N
    0x78,
    0x84,
    0x84,
    0x84,
    0x84,
    0x84,
    0x84,
    0x78, // O
    0xF8,
    0x84,
    0x84,
    0x84,
    0xF8,
    0x80,
    0x80,
    0x80, // P
    0x78,
    0x84,
    0x84,
    0x84,
    0x84,
    0x94,
    0x88,
    0x74, // Q
    0xF8,
    0x84,
    0x84,
    0x84,
    0xF8,
    0x90,
    0x88,
    0x84, // R
    0x78,
    0x84,
    0x80,
    0x60,
    0x18,
    0x04,
    0x84,
    0x78, // S
    0xF8,
    0x20,
    0x20,
    0x20,
    0x20,
    0x20,
    0x20,
    0x20, // T
    0x84,
    0x84,
    0x84,
    0x84,
    0x84,
    0x84,
    0x84,
    0x78, // U
    0x82,
    0x82,
    0x82,
    0x44,
    0x44,
    0x28,
    0x28,
    0x10, // V
    0x82,
    0x82,
    0x82,
    0x92,
    0x92,
    0xAA,
    0x44,
    0x44, // W
    0x82,
    0x44,
    0x28,
    0x10,
    0x10,
    0x28,
    0x44,
    0x82, // X
    0x82,
    0x44,
    0x28,
    0x10,
    0x10,
    0x10,
    0x10,
    0x10, // Y
    0xfe,
    0x04,
    0x08,
    0x10,
    0x20,
    0x40,
    0x80,
    0xfe, // Z
    /* a-z */
    0x00,
    0x00,
    0x78,
    0x04,
    0x7C,
    0x84,
    0x8C,
    0x74, // a
    0x80,
    0x80,
    0xB8,
    0xC4,
    0x84,
    0x84,
    0xC4,
    0xB8, // b
    0x00,
    0x00,
    0x78,
    0x84,
    0x80,
    0x80,
    0x84,
    0x78, // c
    0x04,
    0x04,
    0x74,
    0x8C,
    0x84,
    0x84,
    0x8C,
    0x74, // d
    0x00,
    0x00,
    0x78,
    0x84,
    0xFC,
    0x80,
    0x84,
    0x78, // e
    0x18,
    0x24,
    0x20,
    0xF8,
    0x20,
    0x20,
    0x20,
    0x20, // f
    0x00,
    0x00,
    0x74,
    0x8C,
    0x84,
    0x84,
    0x8C,
    0x74,
    0x04,
    0x78, // g
    0x80,
    0x80,
    0xB8,
    0xC4,
    0x84,
    0x84,
    0x84,
    0x84, // h
    0x80,
    0x80,
    0x00,
    0x80,
    0x80,
    0x80,
    0x80, // i
    0x00,
    0x40,
    0x00,
    0xC0,
    0x40,
    0x40,
    0x40,
    0x40,
    0x40,
    0x80, // j
    0x80,
    0x80,
    0x88,
    0x90,
    0xA0,
    0xD0,
    0x88,
    0x84, // k
    0x00,
    0x80,
    0x80,
    0x80,
    0x80,
    0x80,
    0x80,
    0xe0, // l
    0x00,
    0x00,
    0xEC,
    0x92,
    0x92,
    0x92,
    0x92,
    0x92, // m
    0x00,
    0x00,
    0xB8,
    0xC4,
    0x84,
    0x84,
    0x84,
    0x84, // n
    0x00,
    0x00,
    0x78,
    0x84,
    0x84,
    0x84,
    0x84,
    0x78, // o
    0x00,
    0x00,
    0xB8,
    0xC4,
    0x84,
    0x84,
    0xC4,
    0xB8,
    0x80,
    0x80, // p
    0x00,
    0x00,
    0x74,
    0x8C,
    0x84,
    0x84,
    0x8C,
    0x74,
    0x04,
    0x04, // q
    0x00,
    0x00,
    0xB8,
    0xC4,
    0x80,
    0x80,
    0x80,
    0x80, // r
    0x00,
    0x00,
    0x78,
    0x84,
    0x60,
    0x18,
    0x84,
    0x78, // s
    0x00,
    0x40,
    0xE0,
    0x40,
    0x40,
    0x40,
    0x48,
    0x30, // t
    0x00,
    0x00,
    0x84,
    0x84,
    0x84,
    0x84,
    0x8C,
    0x74, // u
    0x00,
    0x00,
    0x82,
    0x82,
    0x44,
    0x44,
    0x28,
    0x10, // v
    0x00,
    0x00,
    0x82,
    0x82,
    0x92,
    0x92,
    0xAA,
    0x44, // w
    0x00,
    0x00,
    0x82,
    0x44,
    0x28,
    0x28,
    0x44,
    0x82, // x
    0x00,
    0x00,
    0x82,
    0x82,
    0x44,
    0x28,
    0x10,
    0x10,
    0x20,
    0xC0, // y
    0x00,
    0x00,
    0xFC,
    0x08,
    0x10,
    0x20,
    0x40,
    0xFC, // z
    /* Пробел */
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    /* Специальные символы */
    /* ! */
    0x80,
    0x80,
    0x80,
    0x80,
    0x80,
    0x00,
    0x80,
    0x80,
    /* ? */
    0x78,
    0x84,
    0x04,
    0x18,
    0x20,
    0x20,
    0x00,
    0x20,
    /* @ */
    0x78,
    0x84,
    0xB4,
    0xB4,
    0xB4,
    0x80,
    0x84,
    0x78,
    /* # */
    0x28,
    0x28,
    0xFE,
    0x28,
    0xFE,
    0x28,
    0x28,
    0x00,
    /* $ */
    0x10,
    0x7C,
    0x90,
    0x78,
    0x24,
    0xF8,
    0x10,
    0x00,
    /* % */
    0x62,
    0x64,
    0x08,
    0x10,
    0x20,
    0x4C,
    0x8C,
    0x00,
    /* & */
    0x60,
    0x90,
    0x60,
    0x94,
    0x88,
    0x94,
    0x68,
    0x00,
    /* * */
    0x00,
    0x50,
    0x20,
    0xF8,
    0x20,
    0x50,
    0x00,
    0x00,
    /* ( */
    0x20,
    0x40,
    0x80,
    0x80,
    0x80,
    0x40,
    0x20,
    0x00,
    /* ) */
    0x80,
    0x40,
    0x20,
    0x20,
    0x20,
    0x40,
    0x80,
    0x00,
    /* / */
    0x02,
    0x04,
    0x08,
    0x10,
    0x20,
    0x40,
    0x80,
    0x00,
    /* + */
    0x00,
    0x20,
    0x20,
    0xF8,
    0x20,
    0x20,
    0x00,
    0x00,
    /* - */
    0x00,
    0x00,
    0x00,
    0xF8,
    0x00,
    0x00,
    0x00,
    0x00,
    /* = */
    0x00,
    0x00,
    0xf8,
    0x00,
    0x00,
    0xf8,
    0x00,
    0x00,
};

/**
 * Информация о символах: [ширина, смещение в массиве FONT_DATA]
 */
const uint16_t FONT_CHAR_INFO[][2] = {
    /* . */ {2, 0},
    /* , */ {2, 8},
    /* : */ {2, 18},
    /* 0 */ {6, 26},
    /* 1 */ {6, 34},
    /* 2 */ {6, 42},
    /* 3 */ {6, 50},
    /* 4 */ {6, 58},
    /* 5 */ {6, 66},
    /* 6 */ {6, 74},
    /* 7 */ {6, 82},
    /* 8 */ {6, 90},
    /* 9 */ {6, 98},
    /* A */ {6, 106},
    /* B */ {6, 114},
    /* C */ {6, 122},
    /* D */ {6, 130},
    /* E */ {6, 138},
    /* F */ {6, 146},
    /* G */ {6, 154},
    /* H */ {5, 162},
    /* I */ {3, 170},
    /* J */ {7, 178},
    /* K */ {7, 186},
    /* L */ {5, 194},
    /* M */ {7, 202},
    /* N */ {6, 210},
    /* O */ {6, 218},
    /* P */ {6, 226},
    /* Q */ {6, 234},
    /* R */ {6, 242},
    /* S */ {6, 250},
    /* T */ {5, 258},
    /* U */ {6, 266},
    /* V */ {7, 274},
    /* W */ {7, 282},
    /* X */ {7, 290},
    /* Y */ {7, 298},
    /* Z */ {7, 306},
    /* a */ {6, 314},
    /* b */ {6, 322},
    /* c */ {6, 330},
    /* d */ {6, 338},
    /* e */ {6, 346},
    /* f */ {6, 354},
    /* g */ {6, 362},
    /* h */ {6, 372},
    /* i */ {2, 380},
    /* j */ {2, 388},
    /* k */ {6, 398},
    /* l */ {3, 406},
    /* m */ {7, 414},
    /* n */ {6, 422},
    /* o */ {6, 430},
    /* p */ {6, 438},
    /* q */ {6, 448},
    /* r */ {6, 458},
    /* s */ {6, 466},
    /* t */ {5, 474},
    /* u */ {6, 482},
    /* v */ {7, 490},
    /* w */ {7, 498},
    /* x */ {7, 506},
    /* y */ {7, 514},
    /* z */ {6, 524},
    /* Space */ {4, 532},
    /* ! */ {1, 540},
    /* ? */ {6, 548},
    /* @ */ {6, 556},
    /* # */ {7, 564},
    /* $ */ {6, 572},
    /* % */ {7, 580},
    /* & */ {6, 588},
    /* * */ {5, 596},
    /* ( */ {3, 604},
    /* ) */ {3, 612},
    /* / */ {7, 620},
    /* + */ {5, 628},
    /* - */ {5, 636},
    /* = */ {5, 644},
};

/**
 * @brief Получение ширины символа
 * @param c Символ
 * @return Ширина в пикселях
 */
uint8_t GetFontCharWidth(char c) {
  uint8_t index = GetFontCharIndex(c);
  if (index != 0xFF)
    return FONT_CHAR_INFO[index][0];

  return 0;
}

/**
 * @brief Получение индекса символа в массиве FONT_CHAR_INFO
 * @param c Символ
 * @return Индекс или 0xFF если символ не поддерживается
 */
uint8_t GetFontCharIndex(char c) {
  if (c == '.')
    return 0;
  else if (c == ',')
    return 1;
  else if (c == ':')
    return 2;
  else if (c >= '0' && c <= '9')
    return 3 + (c - '0');
  else if (c >= 'A' && c <= 'Z')
    return 13 + (c - 'A');
  else if (c >= 'a' && c <= 'z')
    return 39 + (c - 'a');
  else if (c == ' ')
    return 65;
  else if (c == '!')
    return 66;
  else if (c == '?')
    return 67;
  else if (c == '@')
    return 68;
  else if (c == '#')
    return 69;
  else if (c == '$')
    return 70;
  else if (c == '%')
    return 71;
  else if (c == '&')
    return 72;
  else if (c == '*')
    return 73;
  else if (c == '(')
    return 74;
  else if (c == ')')
    return 75;
  else if (c == '/')
    return 76;
  else if (c == '+')
    return 77;
  else if (c == '-')
    return 78;
  else if (c == '=')
    return 79;

  return 0xFF; // Не поддерживаемый символ
}
